<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>Basic Kanji 120 - Enhanced Flashcard System</title>
    
    <!-- Enhanced Smart Font Loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&family=Inter:wght@400;500;600;700&family=Kalpurush:wght@400;500;600;700&family=Noto+Sans+Bengali:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-shadow: 0 8px 25px rgba(0,0,0,0.12);
            --card-shadow-hover: 0 12px 35px rgba(0,0,0,0.18);
            --transition-smooth: cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --transition-flip: cubic-bezier(0.23, 1, 0.320, 1);
            --transition-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
            --transition-elastic: cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --border-radius: 16px;
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            font-size: 16px;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }

        body {
            font-family: 'Inter', 'Noto Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            min-height: 100dvh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: var(--spacing-md);
            color: #333;
            overflow-x: hidden;
            touch-action: manipulation;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            position: relative;
        }

        /* Enhanced Typography Classes */
        .japanese-text {
            font-family: 'Noto Sans JP', 'Hiragino Sans', 'Yu Gothic', sans-serif;
            font-feature-settings: "kern" 1, "liga" 1;
            font-variant-numeric: proportional-nums;
        }

        .english-text {
            font-family: 'Inter', 'Noto Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-feature-settings: "kern" 1, "liga" 1;
            font-optical-sizing: auto;
        }

        .bangla-text {
            font-family: 'Kalpurush', 'Noto Sans Bengali', 'SolaimanLipi', sans-serif;
            font-feature-settings: "kern" 1, "liga" 1;
            line-height: 1.6;
            font-variant-numeric: proportional-nums;
            font-optical-sizing: auto;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: var(--spacing-lg);
            color: white;
            animation: slideInFromTop 0.6s ease-out;
            z-index: 10;
            width: 100%;
            max-width: 100%;
        }

        .header h1 {
            font-size: clamp(1.75rem, 8vw, 2.5rem);
            margin-bottom: var(--spacing-sm);
            text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
            animation: fadeInScale 0.8s ease-out 0.2s both;
            font-weight: 700;
            letter-spacing: -0.02em;
            line-height: 1.2;
        }

        .header p {
            font-size: clamp(0.875rem, 4vw, 1.125rem);
            opacity: 0.95;
            animation: fadeInScale 0.8s ease-out 0.4s both;
            font-weight: 500;
            line-height: 1.4;
        }

        /* Study Mode */
        .study-mode {
            background: rgba(255,255,255,0.12);
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--border-radius);
            margin-bottom: var(--spacing-lg);
            text-align: center;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.2);
            animation: slideInFromTop 0.6s ease-out 0.3s both;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }

        .mode-btn {
            margin: var(--spacing-xs);
            padding: var(--spacing-md) var(--spacing-lg);
            background: rgba(255,255,255,0.15);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: calc(var(--border-radius) + 4px);
            cursor: pointer;
            transition: all 0.3s var(--transition-smooth);
            font-size: clamp(0.875rem, 3.5vw, 1rem);
            font-weight: 600;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
            min-height: 48px;
            min-width: 80px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            user-select: none;
        }

        .mode-btn.active {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.6);
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .mode-btn:active {
            transform: scale(0.98);
        }

        /* Progress */
        .progress-container {
            width: 100%;
            max-width: 400px;
            margin-bottom: var(--spacing-lg);
            animation: slideInFromLeft 0.6s ease-out 0.4s both;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997, #17a2b8);
            transition: width 0.6s var(--transition-smooth);
            border-radius: 4px;
            position: relative;
        }

        .progress-text {
            text-align: center;
            color: white;
            margin-top: var(--spacing-sm);
            font-weight: 600;
            font-size: clamp(0.875rem, 3.5vw, 1rem);
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }

        /* Navigation */
        .navigation {
            display: flex;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-lg);
            animation: slideInFromBottom 0.6s ease-out 0.5s both;
            flex-wrap: wrap;
            justify-content: center;
            width: 100%;
            max-width: 400px;
        }

        .nav-btn {
            padding: var(--spacing-md) var(--spacing-lg);
            background: rgba(255,255,255,0.15);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.3s var(--transition-smooth);
            font-size: clamp(0.75rem, 3vw, 0.875rem);
            font-weight: 600;
            backdrop-filter: blur(10px);
            min-height: 48px;
            min-width: 48px;
            position: relative;
            overflow: hidden;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-btn:active {
            transform: scale(0.95);
        }

        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
        }

        /* Enhanced Flashcard Container with Animation Support */
        .flashcard-container {
            perspective: 1200px;
            margin-bottom: var(--spacing-xl);
            animation: slideInFromBottom 0.6s ease-out 0.6s both;
            width: 100%;
            max-width: 400px;
            display: flex;
            justify-content: center;
            position: relative;
        }

        .flashcard {
            width: 100%;
            max-width: 380px;
            height: 280px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s var(--transition-flip);
            user-select: none;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .flashcard.transitioning {
            pointer-events: none;
        }

        /* Card Transition Animations */
        .flashcard.slide-left {
            animation: slideLeft 0.6s var(--transition-smooth);
        }

        .flashcard.slide-right {
            animation: slideRight 0.6s var(--transition-smooth);
        }

        .flashcard.slide-up {
            animation: slideUp 0.6s var(--transition-smooth);
        }

        .flashcard.slide-down {
            animation: slideDown 0.6s var(--transition-smooth);
        }

        .flashcard.fade-scale {
            animation: fadeScale 0.6s var(--transition-smooth);
        }

        .flashcard.rotate-in {
            animation: rotateIn 0.6s var(--transition-elastic);
        }

        .flashcard.bounce-in {
            animation: bounceIn 0.6s var(--transition-bounce);
        }

        .flashcard.flip-horizontal {
            animation: flipHorizontal 0.6s var(--transition-smooth);
        }

        .flashcard.flip-vertical {
            animation: flipVertical 0.6s var(--transition-smooth);
        }

        .flashcard.zoom-rotate {
            animation: zoomRotate 0.6s var(--transition-elastic);
        }

        .flashcard.elastic-bounce {
            animation: elasticBounce 0.7s var(--transition-bounce);
        }

        .flashcard.wave-in {
            animation: waveIn 0.6s var(--transition-smooth);
        }

        /* Card Faces */
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: var(--spacing-lg);
            transition: box-shadow 0.3s var(--transition-smooth);
            border: 1px solid rgba(255,255,255,0.1);
            overflow: hidden;
        }

        .card-front {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-color: #e9ecef;
        }

        .card-back {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            transform: rotateY(180deg);
            border-color: #dee2e6;
        }

        /* Kanji Display */
        .kanji-character {
            font-size: clamp(4rem, 20vw, 7rem);
            font-weight: 900;
            color: #2c3e50;
            margin-bottom: var(--spacing-md);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            animation: kanjiReveal 0.8s ease-out;
            transition: transform 0.2s var(--transition-smooth);
            line-height: 0.9;
            text-align: center;
        }

        .card-number {
            position: absolute;
            top: var(--spacing-md);
            right: var(--spacing-md);
            background: linear-gradient(135deg, #6c757d, #495057);
            color: white;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: calc(var(--border-radius) - 4px);
            font-size: clamp(0.75rem, 3vw, 0.875rem);
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            animation: slideInFromRight 0.6s ease-out 0.8s both;
            letter-spacing: 0.5px;
            z-index: 2;
        }

        /* Content Sections */
        .reading-section, .meaning-section {
            margin-bottom: var(--spacing-md);
            text-align: center;
            width: 100%;
            opacity: 1;
            transform: translateY(0);
        }

        .reading-label {
            font-weight: 700;
            color: #495057;
            margin-bottom: var(--spacing-xs);
            font-size: clamp(0.75rem, 3vw, 0.875rem);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .reading-text {
            font-size: clamp(1.125rem, 5vw, 1.5rem);
            color: #2b72b9;
            margin-bottom: var(--spacing-sm);
            font-weight: 600;
            line-height: 1.3;
            word-break: break-word;
        }

        .meaning-text {
            font-size: 20px;
            color: #32587e;
            line-height: 1.5;
            font-weight: 500;
            word-break: break-word;
        }

        .bangla-meaning {
            font-size: 20px;
            color: #163c5e;
            line-height: 1.7;
            font-weight: 500;
            word-break: break-word;
        }

        /* Enhanced Single-Row Controls */
        .controls {
            display: flex;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-lg);
            animation: slideInFromBottom 0.6s ease-out 0.7s both;
            width: 100%;
            max-width: 400px;
            justify-content: space-between;
            align-items: center;
            flex-wrap: nowrap;
            padding: 0;
        }

        .btn {
            padding: var(--spacing-md) var(--spacing-lg);
            border: none;
            border-radius: var(--border-radius);
            font-size: clamp(0.75rem, 3.2vw, 0.875rem);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s var(--transition-smooth);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
            min-width: 85px;
            max-width: 130px;
            min-height: 48px;
            letter-spacing: 0.3px;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 1;
            white-space: nowrap;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            flex: 1.2;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
            flex: 0.9;
        }

        .btn:active {
            transform: scale(0.95);
        }

        /* Mobile Responsive Styles */
        @media (max-width: 480px) {
            body {
                padding: var(--spacing-sm);
            }
            
            .header {
                margin-bottom: var(--spacing-md);
            }
            
            .flashcard {
                height: 260px;
            }
            
            .card-face {
                padding: var(--spacing-md);
            }
            
            .controls {
                gap: 6px;
                max-width: 100%;
                padding: 0 var(--spacing-xs);
            }
            
            .btn {
                padding: var(--spacing-sm) var(--spacing-md);
                min-width: 75px;
                max-width: 110px;
                font-size: clamp(0.7rem, 3vw, 0.8rem);
            }
            
            .btn-primary {
                max-width: 120px;
            }
            
            .navigation {
                gap: var(--spacing-xs);
            }
            
            .nav-btn {
                padding: var(--spacing-sm) var(--spacing-md);
                font-size: 0.75rem;
            }
            
            .mode-btn {
                padding: var(--spacing-sm) var(--spacing-md);
                margin: 2px;
            }
        }

        @media (max-width: 360px) {
            .controls {
                gap: 4px;
            }
            
            .btn {
                min-width: 65px;
                max-width: 95px;
                padding: var(--spacing-sm) 8px;
                font-size: 0.7rem;
            }
            
            .btn-primary {
                max-width: 105px;
            }
        }

        /* Landscape Orientation */
        @media (orientation: landscape) and (max-height: 500px) {
            body {
                padding: var(--spacing-sm);
            }
            
            .header {
                margin-bottom: var(--spacing-sm);
            }
            
            .header h1 {
                font-size: clamp(1.5rem, 6vw, 2rem);
                margin-bottom: 4px;
            }
            
            .header p {
                font-size: clamp(0.75rem, 3vw, 0.875rem);
            }
            
            .flashcard {
                height: 200px;
            }
            
            .progress-container, .navigation, .controls, .study-mode {
                margin-bottom: var(--spacing-sm);
            }
            
            .kanji-character {
                font-size: clamp(3rem, 15vw, 5rem);
                margin-bottom: var(--spacing-sm);
            }
        }

        /* Tablet and Desktop */
        @media (min-width: 481px) and (max-width: 768px) {
            .flashcard {
                max-width: 420px;
                height: 320px;
            }
            
            .controls {
                gap: var(--spacing-md);
            }
            
            .btn {
                min-width: 100px;
                padding: var(--spacing-md) var(--spacing-lg);
            }
            
            .btn-primary {
                max-width: 150px;
            }
        }

        @media (min-width: 769px) {
            .flashcard {
                max-width: 450px;
                height: 350px;
            }
            
            .controls {
                gap: var(--spacing-lg);
            }
            
            .btn {
                min-width: 120px;
                max-width: 160px;
            }
            
            .btn-primary {
                max-width: 180px;
            }
        }

        /* Card Transition Animation Keyframes */
        @keyframes slideLeft {
            0% {
                transform: translateX(100%) scale(0.8);
                opacity: 0;
            }
            100% {
                transform: translateX(0) scale(1);
                opacity: 1;
            }
        }

        @keyframes slideRight {
            0% {
                transform: translateX(-100%) scale(0.8);
                opacity: 0;
            }
            100% {
                transform: translateX(0) scale(1);
                opacity: 1;
            }
        }

        @keyframes slideUp {
            0% {
                transform: translateY(100%) scale(0.8);
                opacity: 0;
            }
            100% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        @keyframes slideDown {
            0% {
                transform: translateY(-100%) scale(0.8);
                opacity: 0;
            }
            100% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        @keyframes fadeScale {
            0% {
                transform: scale(0.3);
                opacity: 0;
            }
            50% {
                transform: scale(1.05);
                opacity: 0.8;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes rotateIn {
            0% {
                transform: rotate(-180deg) scale(0.5);
                opacity: 0;
            }
            100% {
                transform: rotate(0deg) scale(1);
                opacity: 1;
            }
        }

        @keyframes bounceIn {
            0% {
                transform: scale(0.3);
                opacity: 0;
            }
            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }
            70% {
                transform: scale(0.9);
                opacity: 0.9;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes flipHorizontal {
            0% {
                transform: rotateY(-90deg) scale(0.8);
                opacity: 0;
            }
            50% {
                transform: rotateY(0deg) scale(1.05);
                opacity: 0.8;
            }
            100% {
                transform: rotateY(0deg) scale(1);
                opacity: 1;
            }
        }

        @keyframes flipVertical {
            0% {
                transform: rotateX(-90deg) scale(0.8);
                opacity: 0;
            }
            50% {
                transform: rotateX(0deg) scale(1.05);
                opacity: 0.8;
            }
            100% {
                transform: rotateX(0deg) scale(1);
                opacity: 1;
            }
        }

        @keyframes zoomRotate {
            0% {
                transform: scale(0.1) rotate(-180deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.1) rotate(-90deg);
                opacity: 0.8;
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        @keyframes elasticBounce {
            0% {
                transform: scale(0.1) translateY(-100px);
                opacity: 0;
            }
            30% {
                transform: scale(1.2) translateY(0px);
                opacity: 0.7;
            }
            50% {
                transform: scale(0.9) translateY(-20px);
                opacity: 0.9;
            }
            70% {
                transform: scale(1.05) translateY(0px);
                opacity: 1;
            }
            100% {
                transform: scale(1) translateY(0px);
                opacity: 1;
            }
        }

        @keyframes waveIn {
            0% {
                transform: scale(0.8) rotateZ(-5deg) translateX(-50px);
                opacity: 0;
            }
            25% {
                transform: scale(1.1) rotateZ(2deg) translateX(0px);
                opacity: 0.5;
            }
            50% {
                transform: scale(0.95) rotateZ(-1deg) translateX(10px);
                opacity: 0.8;
            }
            75% {
                transform: scale(1.02) rotateZ(0.5deg) translateX(-5px);
                opacity: 0.95;
            }
            100% {
                transform: scale(1) rotateZ(0deg) translateX(0px);
                opacity: 1;
            }
        }

        /* Base Animations */
        @keyframes slideInFromTop {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInFromBottom {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInFromLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInFromRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes kanjiReveal {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Accessibility and Performance */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            .flashcard {
                transition: none;
            }
        }

        @media (prefers-contrast: high) {
            .card-face {
                border-width: 3px;
            }
            
            .btn, .nav-btn, .mode-btn {
                border-width: 3px;
            }
            
            .kanji-character {
                text-shadow: none;
                font-weight: 900;
            }
        }

        @media (prefers-color-scheme: dark) {
            .card-front {
                background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
                color: #e2e8f0;
            }
            
            .card-back {
                background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
                color: #e2e8f0;
            }
            
            .kanji-character {
                color: #f7fafc;
            }
            
            .reading-text, .meaning-text {
                color: #e2e8f0;
            }
            
            .reading-label {
                color: #cbd5e0;
            }
        }

        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .btn:focus,
        .nav-btn:focus,
        .mode-btn:focus,
        .flashcard:focus {
            outline: 2px solid #007bff;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1 class="english-text">Basic Kanji 120</h1>
        <p class="english-text">Japanese Language Proficiency Test N5 Level</p>
    </div>

    <div class="study-mode">
        <button class="mode-btn active english-text" onclick="setStudyMode('sequential', this)">Sequential</button>
        <button class="mode-btn english-text" onclick="setStudyMode('random', this)">Random</button>
        <button class="mode-btn english-text" onclick="setStudyMode('review', this)">Review</button>
    </div>

    <div class="progress-container">
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-text english-text" id="progressText">1 / 120</div>
    </div>

    <div class="navigation">
        <button class="nav-btn english-text" id="prevBtn" onclick="previousCard()">← Prev</button>
        <button class="nav-btn english-text" onclick="goToCard()">Go to kanji</button>
        <button class="nav-btn english-text" id="nextBtn" onclick="nextCard()">Next →</button>
    </div>

    <div class="flashcard-container">
        <div class="flashcard" id="flashcard" tabindex="0" role="button" aria-label="Kanji flashcard">
            <div class="card-face card-front">
                <div class="card-number english-text" id="cardNumber">1</div>
                <div class="kanji-character japanese-text" id="kanjiCharacter">人</div>
            </div>
            <div class="card-face card-back">
                <div class="card-number english-text" id="cardNumberBack">1</div>
                <div class="reading-section">
                    <div class="reading-label english-text">Japanese</div>
                    <div class="reading-text japanese-text" id="hiraganaReading">ひと、ジン、ニン</div>
                </div>
                <div class="meaning-section">
                    <div class="reading-label english-text">English</div>
                    <div class="meaning-text english-text" id="englishMeaning">person; people</div>
                </div>
                <div class="meaning-section">
                    <div class="reading-label english-text">bangla</div>
                    <div class="meaning-text bangla-text bangla-meaning" id="banglaMeaning">ব্যক্তি; মানুষ</div>
                </div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="btn btn-secondary english-text" onclick="previousCard()">Previous</button>
        <button class="btn btn-primary english-text" onclick="flipCard()">
            <span id="flipButtonText">Show Meaning</span>
        </button>
        <button class="btn btn-secondary english-text" onclick="nextCard()">Next</button>
    </div>

    <script>
        // Kanji data
        const kanjiData = [
            { kanji: "人", reading: "ひと、ジン、ニン", english: "person; people", bangla: "ব্যক্তি; মানুষ" },
            { kanji: "日", reading: "ひ、か、ニチ", english: "day; sun", bangla: "দিন; সূর্য" },
            { kanji: "一", reading: "ひと(つ)、イチ、イッ", english: "one", bangla: "এক" },
            { kanji: "二", reading: "ふた(つ)、ニ", english: "two", bangla: "দুই" },
            { kanji: "三", reading: "みっ(つ)、サン", english: "three", bangla: "তিন" },
            { kanji: "四", reading: "よっ(つ)、よん、よ、シ", english: "four", bangla: "চার" },
            { kanji: "五", reading: "いつ(つ)、ゴ", english: "five", bangla: "পাঁচ" },
            { kanji: "六", reading: "むっ(つ)、ロク", english: "six", bangla: "ছয়" },
            { kanji: "七", reading: "なな(つ)、なな、シチ", english: "seven", bangla: "সাত" },
            { kanji: "八", reading: "やっ(つ)、ハチ", english: "eight", bangla: "আট" },
            { kanji: "九", reading: "ここの(つ)、キュウ、ク", english: "nine", bangla: "নয়" },
            { kanji: "十", reading: "とお、ジュウ", english: "ten", bangla: "দশ" },
            { kanji: "月", reading: "つき、ゲツ、ガツ", english: "moon; month", bangla: "চাঁদ; মাস" },
            { kanji: "火", reading: "ひ、カ", english: "fire", bangla: "আগুন" },
            { kanji: "水", reading: "みず、スイ", english: "water", bangla: "পানি" },
            { kanji: "木", reading: "き、モク", english: "tree; wood", bangla: "গাছ; কাঠ" },
            { kanji: "金", reading: "かね、キン", english: "money; gold", bangla: "টাকা; সোনা" },
            { kanji: "土", reading: "ド", english: "earth; soil", bangla: "মাটি" },
            { kanji: "百", reading: "ヒャク", english: "hundred", bangla: "একশত" },
            { kanji: "千", reading: "セン", english: "thousand", bangla: "হাজার" },
            { kanji: "万", reading: "マン", english: "ten thousand", bangla: "দশ হাজার" },
            { kanji: "円", reading: "エン", english: "yen; circle", bangla: "ইয়েন; বৃত্ত" },
            { kanji: "行", reading: "い(きます)、コウ", english: "go; conduct", bangla: "যাওয়া; পরিচালনা" },
            { kanji: "来", reading: "き(ます)、ライ", english: "come", bangla: "আসা" },
            { kanji: "休", reading: "やす(みます)", english: "rest; holiday", bangla: "বিশ্রাম; ছুটি" },
            { kanji: "見", reading: "み(ます)、み(せます)", english: "see; look; watch", bangla: "দেখা" },
            { kanji: "今", reading: "いま、コン", english: "now; present", bangla: "এখন; বর্তমান" },
            { kanji: "大", reading: "おお(きい)、ダイ", english: "big; large", bangla: "বড়" },
            { kanji: "小", reading: "ちい(さい)、ショウ", english: "small; little", bangla: "ছোট" },
            { kanji: "上", reading: "うえ、ジョウ", english: "above; up; on", bangla: "উপরে" },
            { kanji: "下", reading: "した、カ", english: "below; down; under", bangla: "নিচে" },
            { kanji: "中", reading: "なか、チュウ", english: "middle; inside; center", bangla: "মাঝে; ভিতরে" },
            { kanji: "右", reading: "みぎ", english: "right", bangla: "ডান" },
            { kanji: "左", reading: "ひだり", english: "left", bangla: "বাম" },
            { kanji: "山", reading: "やま、サン", english: "mountain", bangla: "পাহাড়" },
            { kanji: "川", reading: "かわ", english: "river", bangla: "নদী" },
            { kanji: "白", reading: "しろ(い)、しろ", english: "white", bangla: "সাদা" },
            { kanji: "本", reading: "ホン", english: "book; origin", bangla: "বই; মূল" },
            { kanji: "子", reading: "こ", english: "child", bangla: "শিশু" },
            { kanji: "男", reading: "おとこ", english: "man; male", bangla: "পুরুষ" },
            { kanji: "女", reading: "おんな", english: "woman; female", bangla: "মহিলা" },
            { kanji: "父", reading: "ちち", english: "father", bangla: "বাবা" },
            { kanji: "母", reading: "はは", english: "mother", bangla: "মা" },
            { kanji: "友", reading: "とも", english: "friend", bangla: "বন্ধু" },
            { kanji: "先", reading: "さき、セン", english: "previous; ahead", bangla: "আগে; সামনে" },
            { kanji: "生", reading: "う(まれます)、セイ", english: "life; birth; student", bangla: "জীবন; জন্ম; ছাত্র" },
            { kanji: "学", reading: "ガク", english: "study; learning", bangla: "অধ্যয়ন; শিক্ষা" },
            { kanji: "校", reading: "コウ", english: "school", bangla: "স্কুল" },
            { kanji: "何", reading: "なに、なん", english: "what", bangla: "কী" },
            { kanji: "時", reading: "とき、ジ", english: "time; hour", bangla: "সময়; ঘন্টা" },
            { kanji: "間", reading: "あいだ、カン", english: "interval; between", bangla: "ব্যবধান; মধ্যে" },
            { kanji: "分", reading: "フン", english: "minute; part", bangla: "মিনিট; অংশ" },
            { kanji: "半", reading: "ハン", english: "half", bangla: "অর্ধেক" },
            { kanji: "毎", reading: "マイ", english: "every", bangla: "প্রতি" },
            { kanji: "年", reading: "とし、ネン", english: "year", bangla: "বছর" },
            { kanji: "前", reading: "まえ、ゼン", english: "before; front", bangla: "আগে; সামনে" },
            { kanji: "後", reading: "うし(ろ)、あと、ゴ", english: "after; behind", bangla: "পরে; পিছনে" },
            { kanji: "午", reading: "ゴ", english: "noon", bangla: "দুপুর" },
            { kanji: "名", reading: "な、メイ", english: "name", bangla: "নাম" },
            { kanji: "車", reading: "くるま、シャ", english: "car; vehicle", bangla: "গাড়ি; যানবাহন" },
            { kanji: "天", reading: "テン", english: "heaven; sky", bangla: "আকাশ; স্বর্গ" },
            { kanji: "気", reading: "キ", english: "spirit; mood", bangla: "মেজাজ; আত্মা" },
            { kanji: "電", reading: "デン", english: "electricity", bangla: "বিদ্যুৎ" },
            { kanji: "話", reading: "はな(します)、はなし、ワ", english: "talk; speak; story", bangla: "কথা বলা; গল্প" },
            { kanji: "食", reading: "た(べます)、ショク", english: "eat; food", bangla: "খাওয়া; খাবার" },
            { kanji: "聞", reading: "き(きます)、ブン", english: "hear; listen; ask", bangla: "শোনা; জিজ্ঞাসা" },
            { kanji: "書", reading: "か(きます)", english: "write", bangla: "লেখা" },
            { kanji: "読", reading: "よ(みます)", english: "read", bangla: "পড়া" },
            { kanji: "国", reading: "くに、コク", english: "country", bangla: "দেশ" },
            { kanji: "外", reading: "そと、ガイ", english: "outside; foreign", bangla: "বাইরে; বিদেশী" },
            { kanji: "語", reading: "ゴ", english: "language", bangla: "ভাষা" },
            { kanji: "入", reading: "い(れます)、はい(ります)", english: "enter; put in", bangla: "প্রবেশ; ঢোকানো" },
            { kanji: "出", reading: "だ(します)、で(ます)", english: "exit; take out", bangla: "বের হওয়া; বের করা" },
            { kanji: "雨", reading: "あめ", english: "rain", bangla: "বৃষ্টি" },
            { kanji: "東", reading: "ひがし、トウ", english: "east", bangla: "পূর্ব" },
            { kanji: "西", reading: "にし", english: "west", bangla: "পশ্চিম" },
            { kanji: "南", reading: "みなみ", english: "south", bangla: "দক্ষিণ" },
            { kanji: "北", reading: "きた", english: "north", bangla: "উত্তর" },
            { kanji: "長", reading: "なが(い)", english: "long", bangla: "লম্বা" },
            { kanji: "高", reading: "たか(い)", english: "high; expensive", bangla: "উঁচু; দামী" },
            { kanji: "口", reading: "くち", english: "mouth", bangla: "মুখ" },
            { kanji: "目", reading: "め", english: "eye", bangla: "চোখ" },
            { kanji: "手", reading: "て", english: "hand", bangla: "হাত" },
            { kanji: "足", reading: "あし", english: "foot; leg", bangla: "পা" },
            { kanji: "近", reading: "ちか(い)", english: "near; close", bangla: "কাছে" },
            { kanji: "有", reading: "あ(ります)、ユウ", english: "exist; have", bangla: "আছে; থাকা" },
            { kanji: "花", reading: "はな", english: "flower", bangla: "ফুল" },
            { kanji: "赤", reading: "あか(い)、あか", english: "red", bangla: "লাল" },
            { kanji: "紙", reading: "かみ", english: "paper", bangla: "কাগজ" },
            { kanji: "買", reading: "か(います)", english: "buy", bangla: "কেনা" },
            { kanji: "朝", reading: "あさ", english: "morning", bangla: "সকাল" },
            { kanji: "昼", reading: "ひる", english: "noon; daytime", bangla: "দুপুর; দিন" },
            { kanji: "夕", reading: "ゆう", english: "evening", bangla: "সন্ধ্যা" },
            { kanji: "夜", reading: "よる", english: "night", bangla: "রাত" },
            { kanji: "私", reading: "わたし、わたくし", english: "I; me", bangla: "আমি" },
            { kanji: "家", reading: "いえ、カ", english: "house; home", bangla: "ঘর; বাড়ি" },
            { kanji: "会", reading: "あ(います)、カイ", english: "meet; meeting", bangla: "দেখা; সভা" },
            { kanji: "社", reading: "シャ", english: "company; society", bangla: "কোম্পানি; সমাজ" },
            { kanji: "店", reading: "みせ", english: "store; shop", bangla: "দোকান" },
            { kanji: "飲", reading: "の(みます)", english: "drink", bangla: "পান করা" },
            { kanji: "多", reading: "おお(い)", english: "many; much", bangla: "অনেক" },
            { kanji: "少", reading: "すこ(し)、すく(ない)", english: "few; little", bangla: "কম; অল্প" },
            { kanji: "古", reading: "ふる(い)", english: "old", bangla: "পুরানো" },
            { kanji: "新", reading: "あたら(しい)、シン", english: "new", bangla: "নতুন" },
            { kanji: "広", reading: "ひろ(い)", english: "wide; spacious", bangla: "প্রশস্ত" },
            { kanji: "安", reading: "やす(い)", english: "cheap; safe", bangla: "সস্তা; নিরাপদ" },
            { kanji: "立", reading: "た(ちます)", english: "stand", bangla: "দাঁড়ানো" },
            { kanji: "知", reading: "し(ります)", english: "know", bangla: "জানা" },
            { kanji: "言", reading: "い(います)、こと", english: "say; word", bangla: "বলা; কথা" },
            { kanji: "思", reading: "おも(います)", english: "think", bangla: "ভাবা" },
            { kanji: "歩", reading: "ある(きます)", english: "walk", bangla: "হাঁটা" },
            { kanji: "走", reading: "はし(ります)", english: "run", bangla: "দৌড়ানো" },
            { kanji: "住", reading: "す(みます)", english: "live; reside", bangla: "বাস করা" },
            { kanji: "空", reading: "そら", english: "sky; empty", bangla: "আকাশ; খালি" },
            { kanji: "週", reading: "シュウ", english: "week", bangla: "সপ্তাহ" },
            { kanji: "魚", reading: "さかな", english: "fish", bangla: "মাছ" },
            { kanji: "耳", reading: "みみ", english: "ear", bangla: "কান" },
            { kanji: "銀", reading: "ギン", english: "silver", bangla: "রূপা" },
            { kanji: "道", reading: "みち", english: "road; way", bangla: "রাস্তা; পথ" },
            { kanji: "駅", reading: "エキ", english: "station", bangla: "স্টেশন" }
        ];

        // Animation collection for random selection
        const cardAnimations = [
            'slide-left',
            'slide-right', 
            'slide-up',
            'slide-down',
            'fade-scale',
            'rotate-in',
            'bounce-in',
            'flip-horizontal',
            'flip-vertical',
            'zoom-rotate',
            'elastic-bounce',
            'wave-in'
        ];

        let currentCardIndex = 0;
        let isFlipped = false;
        let studyMode = 'sequential';
        let reviewCards = [];
        let isTransitioning = false;
        let lastAnimation = '';

        // Get random animation (avoid repeating the same animation)
        function getRandomAnimation() {
            let availableAnimations = cardAnimations.filter(anim => anim !== lastAnimation);
            if (availableAnimations.length === 0) {
                availableAnimations = cardAnimations;
            }
            const randomIndex = Math.floor(Math.random() * availableAnimations.length);
            lastAnimation = availableAnimations[randomIndex];
            return lastAnimation;
        }

        // Enhanced card update with random animations
        function updateCard() {
            if (isTransitioning) return;
            
            const card = kanjiData[currentCardIndex];
            const flashcard = document.getElementById('flashcard');
            
            isTransitioning = true;
            flashcard.classList.add('transitioning');
            
            // Apply random animation
            const randomAnimation = getRandomAnimation();
            flashcard.classList.add(randomAnimation);
            
            setTimeout(() => {
                // Update card content
                document.getElementById('cardNumber').textContent = currentCardIndex + 1;
                document.getElementById('cardNumberBack').textContent = currentCardIndex + 1;
                document.getElementById('kanjiCharacter').textContent = card.kanji;
                document.getElementById('hiraganaReading').textContent = card.reading;
                document.getElementById('englishMeaning').textContent = card.english;
                document.getElementById('banglaMeaning').textContent = card.bangla;
                
                updateProgress();
                updateNavigationButtons();
                updateFlipButtonText();
                
                // Reset to front side if currently flipped
                if (isFlipped) {
                    flashcard.classList.remove('flipped');
                    isFlipped = false;
                    updateFlipButtonText();
                }
                
                // Clean up animation classes
                setTimeout(() => {
                    cardAnimations.forEach(anim => {
                        flashcard.classList.remove(anim);
                    });
                    flashcard.classList.remove('transitioning');
                    isTransitioning = false;
                }, 100);
                
            }, 300);
        }

        function updateProgress() {
            const progress = ((currentCardIndex + 1) / kanjiData.length) * 100;
            const progressFill = document.getElementById('progressFill');
            progressFill.style.width = progress + '%';
            document.getElementById('progressText').textContent = `${currentCardIndex + 1} / ${kanjiData.length}`;
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            if (studyMode === 'sequential') {
                prevBtn.disabled = currentCardIndex === 0;
                nextBtn.disabled = currentCardIndex === kanjiData.length - 1;
            } else {
                prevBtn.disabled = false;
                nextBtn.disabled = false;
            }
        }

        function updateFlipButtonText() {
            const flipButtonText = document.getElementById('flipButtonText');
            flipButtonText.textContent = isFlipped ? 'Show Kanji' : 'Show Meaning';
        }

        function flipCard() {
            if (isTransitioning) return;
            
            const flashcard = document.getElementById('flashcard');
            flashcard.classList.toggle('flipped');
            isFlipped = !isFlipped;
            updateFlipButtonText();
            
            if (navigator.vibrate) {
                navigator.vibrate(30);
            }
        }

        function nextCard() {
            if (isTransitioning) return;
            
            if (studyMode === 'random') {
                currentCardIndex = Math.floor(Math.random() * kanjiData.length);
            } else if (studyMode === 'review' && reviewCards.length > 0) {
                const randomIndex = Math.floor(Math.random() * reviewCards.length);
                currentCardIndex = reviewCards[randomIndex];
            } else {
                if (currentCardIndex < kanjiData.length - 1) {
                    currentCardIndex++;
                } else if (studyMode !== 'sequential') {
                    currentCardIndex = 0;
                }
            }
            updateCard();
        }

        function previousCard() {
            if (isTransitioning) return;
            
            if (studyMode === 'random') {
                currentCardIndex = Math.floor(Math.random() * kanjiData.length);
            } else if (studyMode === 'review' && reviewCards.length > 0) {
                const randomIndex = Math.floor(Math.random() * reviewCards.length);
                currentCardIndex = reviewCards[randomIndex];
            } else {
                if (currentCardIndex > 0) {
                    currentCardIndex--;
                } else if (studyMode !== 'sequential') {
                    currentCardIndex = kanjiData.length - 1;
                }
            }
            updateCard();
        }

        function goToCard() {
            const cardNumber = prompt('Enter card number (1-120):');
            if (cardNumber && cardNumber >= 1 && cardNumber <= kanjiData.length) {
                currentCardIndex = parseInt(cardNumber) - 1;
                updateCard();
            }
        }

        function setStudyMode(mode, buttonElement) {
            if (isTransitioning) return;
            
            studyMode = mode;
            
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            buttonElement.classList.add('active');
            
            if (mode === 'review') {
                reviewCards = [];
                for (let i = 0; i < Math.min(30, kanjiData.length); i++) {
                    reviewCards.push(Math.floor(Math.random() * kanjiData.length));
                }
                if (reviewCards.length === 0) {
                    alert('No cards to review! Starting with all cards.');
                    reviewCards = Array.from({length: kanjiData.length}, (_, i) => i);
                }
            }
            
            updateNavigationButtons();
        }

        // Touch gesture support (swipe only, no tap-to-flip)
        let touchStartX = 0;
        let touchStartY = 0;
        let touchEndX = 0;
        let touchEndY = 0;
        let touchStartTime = 0;
        let isSwiping = false;

        const flashcard = document.getElementById('flashcard');

        flashcard.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].clientX;
            touchStartY = e.changedTouches[0].clientY;
            touchStartTime = Date.now();
            isSwiping = false;
        }, { passive: true });

        flashcard.addEventListener('touchmove', function(e) {
            const touchCurrentX = e.changedTouches[0].clientX;
            const touchCurrentY = e.changedTouches[0].clientY;
            const deltaX = Math.abs(touchCurrentX - touchStartX);
            const deltaY = Math.abs(touchCurrentY - touchStartY);
            
            if (deltaX > 10 || deltaY > 10) {
                isSwiping = true;
            }
        }, { passive: true });

        flashcard.addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].clientX;
            touchEndY = e.changedTouches[0].clientY;
            const touchDuration = Date.now() - touchStartTime;
            
            if (isSwiping && touchDuration < 500) {
                handleSwipe();
            }
        }, { passive: true });

        function handleSwipe() {
            const deltaX = touchEndX - touchStartX;
            const deltaY = touchEndY - touchStartY;
            const minSwipeDistance = 50;
            const maxVerticalDeviation = 80;

            if (Math.abs(deltaX) > minSwipeDistance && Math.abs(deltaY) < maxVerticalDeviation) {
                if (deltaX > 0) {
                    previousCard();
                } else {
                    nextCard();
                }
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(event) {
            if (isTransitioning) return;
            
            const handledKeys = ['ArrowLeft', 'ArrowRight', 'a', 'A', 'd', 'D', 'r', 'R', 's', 'S', 'Escape', 'g', 'G', 'f', 'F'];
            if (handledKeys.includes(event.key)) {
                event.preventDefault();
            }

            switch(event.key) {
                case 'f':
                case 'F':
                    flipCard();
                    break;
                case 'ArrowLeft':
                case 'a':
                case 'A':
                    previousCard();
                    break;
                case 'ArrowRight':
                case 'd':
                case 'D':
                    nextCard();
                    break;
                case 'r':
                case 'R':
                    document.querySelector('.mode-btn:nth-child(2)').click();
                    break;
                case 's':
                case 'S':
                    document.querySelector('.mode-btn:nth-child(1)').click();
                    break;
                case 'Escape':
                    if (isFlipped) {
                        flipCard();
                    }
                    break;
                case 'g':
                case 'G':
                    goToCard();
                    break;
            }
        });

        // Initialize
        function initialize() {
            if (document.fonts) {
                document.fonts.ready.then(() => {
                    updateCard();
                    console.log('Fonts loaded successfully');
                });
            } else {
                setTimeout(() => {
                    updateCard();
                }, 100);
            }
            
            const setVH = () => {
                const vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
            };
            
            setVH();
            window.addEventListener('resize', setVH);
            window.addEventListener('orientationchange', setVH);
        }

        document.addEventListener('DOMContentLoaded', initialize);

        // Prevent zoom on double tap for iOS
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>